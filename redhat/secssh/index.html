
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://divijesh.tech/redhat/secssh/">
      
      <link rel="icon" href="../../assets/img/layout/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Configuring And Securing Ssh - Divijesh Varma</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="teal">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#accessing-the-remote-command-line-with-ssh" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Divijesh Varma" class="md-header__button md-logo" aria-label="Divijesh Varma" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Divijesh Varma
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuring And Securing Ssh
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../linux/vi/" class="md-tabs__link">
        Linux
      </a>
    </li>
  

  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../intro/" class="md-tabs__link md-tabs__link--active">
        RedHat
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../english/vol1/" class="md-tabs__link">
        English
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../basics/threat-modeling/" class="md-tabs__link">
        Knowledge Base
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../tools/" class="md-tabs__link">
        Recommendations
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../about/" class="md-tabs__link">
        About
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Divijesh Varma" class="md-nav__button md-logo" aria-label="Divijesh Varma" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Divijesh Varma
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Linux" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Editors
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Editors" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Editors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/vi/" class="md-nav__link">
        Vim
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/nano/" class="md-nav__link">
        Nano
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Notes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Notes" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/rhcsa/" class="md-nav__link">
        Tritree
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/user/" class="md-nav__link">
        User Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/acl/" class="md-nav__link">
        Access control lists (ACLs)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/network/" class="md-nav__link">
        Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/ssh/" class="md-nav__link">
        OpenSSH
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/process/" class="md-nav__link">
        Process Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/software/" class="md-nav__link">
        Software Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/systemd/" class="md-nav__link">
        Systemd Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/cron/" class="md-nav__link">
        Cron Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/logs/" class="md-nav__link">
        Logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/disk/" class="md-nav__link">
        Disk Management
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          RedHat
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="RedHat" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          RedHat
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          RHSA I (RH124)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="RHSA I (RH124)" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          RHSA I (RH124)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../intro/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../access/" class="md-nav__link">
        Accessing The Command Line
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manage/" class="md-nav__link">
        Managing Files From The Command Line
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../help/" class="md-nav__link">
        Getting Help In Red Hat Enterprise Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../edit/" class="md-nav__link">
        Creating, Viewing, And Editing Text Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../users/" class="md-nav__link">
        Managing Local Users And Groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../control/" class="md-nav__link">
        Controlling Access To Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../monitor/" class="md-nav__link">
        Monitoring And Managing Linux Processes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../service/" class="md-nav__link">
        Controlling Services And Daemons
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Configuring And Securing Ssh
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Configuring And Securing Ssh
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#accessing-the-remote-command-line-with-ssh" class="md-nav__link">
    ACCESSING THE REMOTE COMMAND LINE WITH SSH
  </a>
  
    <nav class="md-nav" aria-label="ACCESSING THE REMOTE COMMAND LINE WITH SSH">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-openssh" class="md-nav__link">
    WHAT IS OPENSSH?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secure-shell-examples" class="md-nav__link">
    SECURE SHELL EXAMPLES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifying-remote-users" class="md-nav__link">
    IDENTIFYING REMOTE USERS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-host-keys" class="md-nav__link">
    SSH HOST KEYS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-ssh-key-based-authentication" class="md-nav__link">
    CONFIGURING SSH KEY-BASED AUTHENTICATION
  </a>
  
    <nav class="md-nav" aria-label="CONFIGURING SSH KEY-BASED AUTHENTICATION">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssh-key-based-authentication" class="md-nav__link">
    SSH KEY-BASED AUTHENTICATION
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customizing-openssh-service-configuration" class="md-nav__link">
    CUSTOMIZING OPENSSH SERVICE CONFIGURATION
  </a>
  
    <nav class="md-nav" aria-label="CUSTOMIZING OPENSSH SERVICE CONFIGURATION">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-the-openssh-server" class="md-nav__link">
    CONFIGURING THE OPENSSH SERVER
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prohibit-the-superuser-from-logging-in-using-ssh" class="md-nav__link">
    PROHIBIT THE SUPERUSER FROM LOGGING IN USING SSH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prohibiting-password-based-authentication-for-ssh" class="md-nav__link">
    PROHIBITING PASSWORD-BASED AUTHENTICATION FOR SSH
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    SUMMARY
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab" class="md-nav__link">
    LAB
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../store/" class="md-nav__link">
        Analyzing And Storing Logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mannet/" class="md-nav__link">
        Managing Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../archiv/" class="md-nav__link">
        Archiving And Transferring Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pack/" class="md-nav__link">
        Installing And Updating Software Packages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../filsys/" class="md-nav__link">
        Accessing Linux File Systems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../support/" class="md-nav__link">
        Analyzing Servers And Getting Support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../review/" class="md-nav__link">
        Comprehensive Review
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          RHSA II (RH134)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="RHSA II (RH134)" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          RHSA II (RH134)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat2/cmd/" class="md-nav__link">
        Improving Command-Line Productivity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat2/tasks/" class="md-nav__link">
        Scheduling Future Tasks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat2/tuning/" class="md-nav__link">
        Tuning System Performance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat2/acls/" class="md-nav__link">
        Controlling Access To Files With Acls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat2/selinux/" class="md-nav__link">
        Managing Selinux Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat2/storage/" class="md-nav__link">
        Managing Basic Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat2/lvm/" class="md-nav__link">
        Managing Logical Volumes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat2/vdo/" class="md-nav__link">
        Implementing Advanced Storage Features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat2/nas/" class="md-nav__link">
        Accessing Network-Attached Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat2/boot/" class="md-nav__link">
        Controlling The Boot Process
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          English
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="English" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          English
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_1">
          Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorial" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../english/vol1/" class="md-nav__link">
        Vol-1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../english/vol2/" class="md-nav__link">
        Vol-2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../english/vol3/" class="md-nav__link">
        Vol-3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../english/vol4/" class="md-nav__link">
        Vol-4
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Knowledge Base
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Knowledge Base" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Knowledge Base
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_1">
          The Basics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="The Basics" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          The Basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/threat-modeling/" class="md-nav__link">
        Threat Modeling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/dns/" class="md-nav__link">
        Introduction to DNS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/multi-factor-authentication/" class="md-nav__link">
        Multi-factor Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/account-deletion/" class="md-nav__link">
        Account Deletion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2">
          Android
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Android" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Android
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../android/overview/" class="md-nav__link">
        Android Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../android/grapheneos-vs-calyxos/" class="md-nav__link">
        GrapheneOS vs CalyxOS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3">
          Linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Linux" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux-desktop/overview/" class="md-nav__link">
        Linux Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux-desktop/hardening/" class="md-nav__link">
        System Hardening
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux-desktop/sandboxing/" class="md-nav__link">
        Application Sandboxing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4">
          Advanced
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Advanced" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Advanced
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/integrating-metadata-removal/" class="md-nav__link">
        Integrating Metadata Removal
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Recommendations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Recommendations" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Recommendations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/" class="md-nav__link">
        Privacy Tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_2" type="checkbox" id="__nav_6_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_2">
          Browsers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Browsers" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          Browsers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../browsers/" class="md-nav__link">
        Web Browsers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_3" type="checkbox" id="__nav_6_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_3">
          Operating Systems
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Operating Systems" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          Operating Systems
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../android/" class="md-nav__link">
        Android
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux-desktop/" class="md-nav__link">
        Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../qubes/" class="md-nav__link">
        Qubes OS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../router/" class="md-nav__link">
        Router Firmware
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_4" type="checkbox" id="__nav_6_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_4">
          Providers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Providers" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          Providers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/" class="md-nav__link">
        Cloud Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dns/" class="md-nav__link">
        DNS Resolvers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../email/" class="md-nav__link">
        Email Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../search-engines/" class="md-nav__link">
        Search Engines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vpn/" class="md-nav__link">
        VPN Services
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_5" type="checkbox" id="__nav_6_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_5">
          Software
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Software" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_5">
          <span class="md-nav__icon md-icon"></span>
          Software
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../calendar-contacts/" class="md-nav__link">
        Calendar and Contact Sync
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/" class="md-nav__link">
        Notebooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../email-clients/" class="md-nav__link">
        Email Clients
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../encryption/" class="md-nav__link">
        Encryption Software
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../file-sharing/" class="md-nav__link">
        File Sharing and Sync
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata-removal-tools/" class="md-nav__link">
        Metadata Removal Tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../multi-factor-authentication/" class="md-nav__link">
        Multi-Factor Authenticators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../passwords/" class="md-nav__link">
        Password Managers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../productivity/" class="md-nav__link">
        Productivity Tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../real-time-communication/" class="md-nav__link">
        Real-Time Communication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../news-aggregators/" class="md-nav__link">
        News Aggregators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../self-contained-networks/" class="md-nav__link">
        Self-Contained Networks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../video-streaming/" class="md-nav__link">
        Video Streaming
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        Heading
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#accessing-the-remote-command-line-with-ssh" class="md-nav__link">
    ACCESSING THE REMOTE COMMAND LINE WITH SSH
  </a>
  
    <nav class="md-nav" aria-label="ACCESSING THE REMOTE COMMAND LINE WITH SSH">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-openssh" class="md-nav__link">
    WHAT IS OPENSSH?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secure-shell-examples" class="md-nav__link">
    SECURE SHELL EXAMPLES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifying-remote-users" class="md-nav__link">
    IDENTIFYING REMOTE USERS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-host-keys" class="md-nav__link">
    SSH HOST KEYS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-ssh-key-based-authentication" class="md-nav__link">
    CONFIGURING SSH KEY-BASED AUTHENTICATION
  </a>
  
    <nav class="md-nav" aria-label="CONFIGURING SSH KEY-BASED AUTHENTICATION">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssh-key-based-authentication" class="md-nav__link">
    SSH KEY-BASED AUTHENTICATION
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customizing-openssh-service-configuration" class="md-nav__link">
    CUSTOMIZING OPENSSH SERVICE CONFIGURATION
  </a>
  
    <nav class="md-nav" aria-label="CUSTOMIZING OPENSSH SERVICE CONFIGURATION">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-the-openssh-server" class="md-nav__link">
    CONFIGURING THE OPENSSH SERVER
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prohibit-the-superuser-from-logging-in-using-ssh" class="md-nav__link">
    PROHIBIT THE SUPERUSER FROM LOGGING IN USING SSH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prohibiting-password-based-authentication-for-ssh" class="md-nav__link">
    PROHIBITING PASSWORD-BASED AUTHENTICATION FOR SSH
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    SUMMARY
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab" class="md-nav__link">
    LAB
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  




  <h1>Configuring And Securing Ssh</h1>

<h3 id="accessing-the-remote-command-line-with-ssh">ACCESSING THE REMOTE COMMAND LINE WITH SSH<a class="headerlink" href="#accessing-the-remote-command-line-with-ssh" title="Permanent link">&para;</a></h3>
<h4 id="what-is-openssh">WHAT IS OPENSSH?<a class="headerlink" href="#what-is-openssh" title="Permanent link">&para;</a></h4>
<p><em>OpenSSH</em> implements the Secure Shell or SSH protocol in the Red Hat Enterprise Linux systems.
The SSH protocol enables systems to communicate in an encrypted and secure fashion over an
insecure network.</p>
<p>You can use the <strong>ssh</strong> command to create a secure connection to a remote system, authenticate as a
specific user, and get an interactive shell session on the remote system as that user. You may also
use the <strong>ssh</strong> command to run an individual command on the remote system without running an
interactive shell.</p>
<h4 id="secure-shell-examples">SECURE SHELL EXAMPLES<a class="headerlink" href="#secure-shell-examples" title="Permanent link">&para;</a></h4>
<p>The following <strong>ssh</strong> command would log you in on the remote server remotehost using the
same user name as the current local user. In this example, the remote system prompts you to
authenticate with that user's password.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="o">[</span>user01@host ~<span class="o">]</span>$ ssh remotehost
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>user01@remotehost<span class="err">&#39;</span>s password: redhat
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>...output omitted...
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="o">[</span>user01@remotehost ~<span class="o">]</span>$ 
</code></pre></div>
<p>You can the <strong>exit</strong> command to log out of the remote system.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">[</span>user01@remotehost ~<span class="o">]</span>$ <span class="nb">exit</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nb">logout</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>Connection to remotehost closed.
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="o">[</span>user01@host ~<span class="o">]</span>$ 
</code></pre></div>
<p>The next <strong>ssh</strong> command would log you in on the remote server remotehost using the user name
<em>user02</em>. Again, you are prompted by the remote system to authenticate with that user's password.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">[</span>user01@host ~<span class="o">]</span>$ ssh user02@remotehost
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>user02@remotehost<span class="err">&#39;</span>s password: shadowman
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>...output omitted...
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="o">[</span>user02@remotehost ~<span class="o">]</span>$ 
</code></pre></div>
<p>This <strong>ssh</strong> command would run the <strong>hostname</strong> command on the remotehost remote system as the
user02 user without accessing the remote interactive shell.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="o">[</span>user01@host ~<span class="o">]</span>$ ssh user02@remotehost hostname
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>user02@remotehost<span class="err">&#39;</span>s password: shadowman
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>remotehost.lab.example.com
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="o">[</span>user01@host ~<span class="o">]</span>$ 
</code></pre></div>
<p>Notice that the preceding command displayed the output in the local system's terminal.</p>
<h4 id="identifying-remote-users">IDENTIFYING REMOTE USERS<a class="headerlink" href="#identifying-remote-users" title="Permanent link">&para;</a></h4>
<p>The <strong>w</strong> command displays a list of users currently logged into the computer. This is especially useful
to show which users are logged in using <strong>ssh</strong> from which remote locations, and what they are doing.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="o">[</span>user01@host ~<span class="o">]</span>$ ssh user01@remotehost
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>user01@remotehost<span class="err">&#39;</span>s password: redhat
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="o">[</span>user01@remotehost ~<span class="o">]</span>$ w
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a> <span class="m">16</span>:13:38 up <span class="m">36</span> min,  <span class="m">1</span> user,  load average: <span class="m">0</span>.00, <span class="m">0</span>.00, <span class="m">0</span>.00
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>user02   pts/0    <span class="m">172</span>.25.250.10    <span class="m">16</span>:13    <span class="m">7</span>:30   <span class="m">0</span>.01s  <span class="m">0</span>.01s -bash
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>user01   pts/1    <span class="m">172</span>.25.250.10    <span class="m">16</span>:24    <span class="m">3</span>.00s  <span class="m">0</span>.01s  <span class="m">0</span>.00s w
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="o">[</span>user02@remotehost ~<span class="o">]</span>$ 
</code></pre></div>
<p>The preceding output shows that the user02 user has logged in to the system on the pseudo-
terminal 0 at <strong>16:13</strong> today from the host with the 172.25.250.10 IP address, and has been idle
at a shell prompt for seven minutes and thirty seconds. The preceding output also shows that the
user01 user has logged in to the system on the pseudo-terminal 1 and has been idle since since
last three seconds after executing the <strong>w</strong> command.</p>
<h4 id="ssh-host-keys">SSH HOST KEYS<a class="headerlink" href="#ssh-host-keys" title="Permanent link">&para;</a></h4>
<p>SSH secures communication through public-key encryption. When an SSH client connects to an
SSH server, the server sends a copy of its public key to the client before the client logs in. This is
used to set up the secure encryption for the communication channel and to authenticate the server
to the client.</p>
<p>When a user uses the ssh command to connect to an <strong>SSH</strong> server, the command checks to see if it
has a copy of the public key for that server in its local known hosts files. The system administrator
may have pre-configured it in <strong>/etc/ssh/ssh_known_hosts</strong>, or the user may have a <strong>~/.ssh/
known_hosts</strong> file in their home directory that contains the key.</p>
<p>If the client has a copy of the key, <strong>ssh</strong> will compare the key from the known hosts files for that
server to the one it received. If the keys do not match, the client assumes that the network traffic
to the server could be hijacked or that the server has been compromised, and seeks the user's
confirmation on whether or not to continue with the connection.</p>
<div class="admonition info">
<p class="admonition-title">NOTE</p>
<p>Set the StrictHostKeyChecking parameter to <strong>yes</strong> in the user-specific <strong>~/.ssh/
config</strong> file or the system-wide <strong>/etc/ssh/ssh_config</strong> to cause the <strong>ssh</strong>
command to always abort the SSH connection if the public keys do not match.</p>
</div>
<p>If the client does not have a copy of the public key in its known hosts files, the <strong>ssh</strong> command
will ask you if you want to log in anyway. If you do, a copy of the public key will be saved in your
<strong>~/.ssh/known_hosts</strong> file so that the server's identity can be automatically confirmed in the
future.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="o">[</span>user01@host ~<span class="o">]</span>$ ssh newhost
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>The authenticity of host <span class="s1">&#39;remotehost (172.25.250.12)&#39;</span> can<span class="s1">&#39;t be established.</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="s1">ECDSA key fingerprint is SHA256:qaS0PToLrqlCO2XGklA0iY7CaP7aPKimerDoaUkv720.</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="s1">Are you sure you want to continue connecting (yes/no)? yes</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="s1">Warning: Permanently added &#39;</span>newhost,172.25.250.12<span class="s1">&#39; (ECDSA) to the list of known</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="s1"> hosts.</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="s1">user01@newhost&#39;</span>s password: redhat
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>...output omitted...
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="o">[</span>user01@newhost ~<span class="o">]</span>$ 
</code></pre></div>
<p><strong>SSH Known Hosts Key Management</strong></p>
<p>If a server's public key is changed because the key was lost due to hard drive failure, or replaced for
some legitimate reason, you will need to edit the known hosts files to make sure the entry for the
old public key is replaced with an entry with the new public key in order to log in without errors.</p>
<p>Public keys are stored in the <strong>/etc/ssh/ssh_known_hosts</strong> and each users' <strong>~/.ssh/
known_hosts</strong> file on the SSH client. Each key is on one line. The first field is a list of hostnames
and IP addresses that share that public key. The second field is the encryption algorithm for the
key. The last field is the key itself.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="o">[</span>user01@host ~<span class="o">]</span>$ cat ~/.ssh/known_hosts
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>remotehost,172.25.250.11 ecdsa-sha2-nistp256
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a> AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBOsEi0e+FlaNT6jul8Ag5Nj
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>+RViZl0yE2w6iYUr+1fPtOIF0EaOgFZ1LXM37VFTxdgFxHS3D5WhnIfb+68zf8+w<span class="o">=</span>
</code></pre></div>
<p>Each remote SSH server that you conect to stores its public key in the <strong>/etc/ssh</strong> directory in files
with the extension <strong>.pub</strong>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="o">[</span>user01@remotehost ~<span class="o">]</span>$ ls /etc/ssh/*key.pub
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>/etc/ssh/ssh_host_ecdsa_key.pub  /etc/ssh/ssh_host_ed25519_key.pub  /etc/ssh/
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>ssh_host_rsa_key.pub
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">NOTE</p>
<p>It is a good practice to add entries matching a server's ssh_host_*key.pub
files to your ~/.ssh/known_hosts file or the system-wide /etc/ssh/
ssh_known_hosts file.</p>
</div>
<h3 id="configuring-ssh-key-based-authentication">CONFIGURING SSH KEY-BASED AUTHENTICATION<a class="headerlink" href="#configuring-ssh-key-based-authentication" title="Permanent link">&para;</a></h3>
<h4 id="ssh-key-based-authentication">SSH KEY-BASED AUTHENTICATION<a class="headerlink" href="#ssh-key-based-authentication" title="Permanent link">&para;</a></h4>
<p>You can configure an SSH server to allow you to authenticate without a password by using key-
based authentication. This is based on a private-public key scheme.</p>
<p>To do this, you generate a matched pair of cryptographic key files. One is a private key, the other
a matching public key. The private key file is used as the authentication credential and, like a
password, must be kept secret and secure. The public key is copied to systems the user wants to
connect to, and is used to verify the private key. The public key does not need to be secret.</p>
<p>You put a copy of the public key in your account on the server. When you try to log in, the SSH
server can use the public key to issue a challenge that can only be correctly answered by using the
private key. As a result, your ssh client can automatically authenticate your login to the server
with your unique copy of the private key. This allows you to securely access systems in a way that
doesn't require you to enter a password interactively every time.</p>
<p><strong>Generating SSH Keys</strong></p>
<p>To create a private key and matching public key for authentication, use the <strong>ssh-keygen</strong>
command. By default, your private and public keys are saved in your <strong>~/.ssh/id_rsa</strong> and
<strong>~/.ssh/id_rsa.pub</strong> files, respectively.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="o">[</span>user@host ~<span class="o">]</span>$ ssh-keygen
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>Generating public/private rsa key pair.
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>Enter file <span class="k">in</span> which to save the key <span class="o">(</span>/home/user/.ssh/id_rsa<span class="o">)</span>: Enter
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>Created directory <span class="s1">&#39;/home/user/.ssh&#39;</span>.
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>Enter passphrase <span class="o">(</span>empty <span class="k">for</span> no passphrase<span class="o">)</span>: Enter
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>Enter same passphrase again: Enter
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>Your identification has been saved <span class="k">in</span> /home/user/.ssh/id_rsa.
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>Your public key has been saved <span class="k">in</span> /home/user/.ssh/id_rsa.pub.
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>The key fingerprint is:
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>SHA256:vxutUNPio3QDCyvkYm1oIx35hmMrHpPKWFdIYu3HV+w user@host.lab.example.com
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>The key<span class="err">&#39;</span>s randomart image is:
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>+---<span class="o">[</span>RSA <span class="m">2048</span><span class="o">]</span>----+
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="p">|</span>                 <span class="p">|</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="p">|</span>   .     .       <span class="p">|</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="p">|</span>  o o     o      <span class="p">|</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="p">|</span> . <span class="o">=</span> o   o .     <span class="p">|</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="p">|</span>  o + <span class="o">=</span> S E .    <span class="p">|</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="p">|</span> ..O o + * +     <span class="p">|</span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="p">|</span>.+% O . + B .    <span class="p">|</span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="p">|</span><span class="o">=</span>*oO . . + *     <span class="p">|</span>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="p">|</span>++.     . +.     <span class="p">|</span>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a>+----<span class="o">[</span>SHA256<span class="o">]</span>-----+
</code></pre></div>
<p>If you do not specify a passphrase when <strong>ssh-keygen</strong> prompts you, the generated private key
is not protected. In this case, anyone with your private key file could use it for authentication. If
you set a passphrase, then you will need to enter that passphrase when you use the private key
for authentication. (Therefore, you would be using the private key's passphrase rather than your
password on the remote host to authenticate.)</p>
<p>You can run a helper program called <strong>ssh-agent</strong> which can temporarily cache your private key
passphrase in memory at the start of your session to get true passwordless authentication. This
will be discussed later in this section.</p>
<p>The following example of the <strong>ssh-keygen</strong> command shows the creation of the passphrase-
protected private key alongside the public key.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="o">[</span>user@host ~<span class="o">]</span>$ ssh-keygen -f .ssh/key-with-pass
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>Generating public/private rsa key pair.
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>Enter passphrase <span class="o">(</span>empty <span class="k">for</span> no passphrase<span class="o">)</span>: 
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>Enter same passphrase again: 
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>Your identification has been saved <span class="k">in</span> .ssh/key-with-pass.
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>Your public key has been saved <span class="k">in</span> .ssh/key-with-pass.pub.
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>The key fingerprint is:
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>SHA256:w3GGB7EyHUry4aOcNPKmhNKS7dl1YsMVLvFZJ77VxAo user@host.lab.example.com
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>The key<span class="err">&#39;</span>s randomart image is:
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>+---<span class="o">[</span>RSA <span class="m">2048</span><span class="o">]</span>----+
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="p">|</span>    . + <span class="o">=</span>.o ...  <span class="p">|</span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="p">|</span>     <span class="o">=</span> B XEo o.  <span class="p">|</span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="p">|</span>  . o O <span class="nv">X</span> <span class="o">=</span>....  <span class="p">|</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="p">|</span> <span class="o">=</span> <span class="o">=</span> <span class="o">=</span> <span class="nv">B</span> <span class="o">=</span> o.    <span class="p">|</span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="p">|</span><span class="o">=</span> + * * S .      <span class="p">|</span>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="p">|</span>.+ <span class="o">=</span> o + .       <span class="p">|</span>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="p">|</span>  + .            <span class="p">|</span>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="p">|</span>                 <span class="p">|</span>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="p">|</span>                 <span class="p">|</span>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>+----<span class="o">[</span>SHA256<span class="o">]</span>-----+
</code></pre></div>
<p>The <strong>-f</strong> option with the <strong>ssh-keygen</strong> command determines the files where the keys are saved. In
the preceding example, the private and public keys are saved in the <strong>/home/user/.ssh/key-
with-pass /home/user/.ssh/key-with-pass.pub</strong> files, respectively.</p>
<div class="admonition danger">
<p class="admonition-title">WARNING</p>
<p>During further SSH keypair generation, unless you specify a unique file name, you
are prompted for permission to overwrite the existing id_rsa and id_rsa.pub
files. If you overwrite the existing id_rsa and id_rsa.pub files, then you must
replace the old public key with the new one on all the SSH servers that have your old
public key.</p>
</div>
<p>Once the SSH keys have been generated, they are stored by default in the <strong>.ssh/</strong> directory of
the user's home directory. The permission modes must be 600 on the private key and 644 on the
public key.</p>
<p><strong>Sharing the Public Key</strong></p>
<p>Before key-based authentication can be used, the public key needs to be copied to the destination
system. The <strong>ssh-copy-id</strong> command copies the public key of the SSH keypair to the destination
system. If you omit the path to the public key file while running <strong>ssh-copy-id</strong>, it uses the default
<strong>/home/user/.ssh/id_rsa.pub</strong> file.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="o">[</span>user@host ~<span class="o">]</span>$ ssh-copy-id -i .ssh/key-with-pass.pub user@remotehost
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>/usr/bin/ssh-copy-id: INFO: Source of key<span class="o">(</span>s<span class="o">)</span> to be installed: <span class="s2">&quot;/home/user/.ssh/</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="s2">id_rsa.pub&quot;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>/usr/bin/ssh-copy-id: INFO: attempting to log <span class="k">in</span> with the new key<span class="o">(</span>s<span class="o">)</span>, to filter
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a> out any that are already installed
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>/usr/bin/ssh-copy-id: INFO: <span class="m">1</span> key<span class="o">(</span>s<span class="o">)</span> remain to be installed -- <span class="k">if</span> you are prompted
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a> now it is to install the new keys
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>user@remotehost<span class="s1">&#39;s password: redhat</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="s1">Number of key(s) added: 1</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="s1">Now try logging into the machine, with:   &quot;ssh &#39;</span>user@remotehost<span class="err">&#39;</span><span class="s2">&quot;</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="s2">and check to make sure that only the key(s) you wanted were added.</span>
</code></pre></div>
<p>After the public key is successfully transferred to a remote system, you can authenticate to the
remote system using the corresponding private key while logging in to the remote system over
SSH. If you omit the path to the private key file while running the ssh command, it uses the default
<strong>/home/user/.ssh/id_rsa</strong> file.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="o">[</span>user@host ~<span class="o">]</span>$ ssh -i .ssh/key-with-pass user@remotehost
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>Enter passphrase <span class="k">for</span> key <span class="s1">&#39;.ssh/key-with-pass&#39;</span>: redhatpass
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>...output omitted...
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="o">[</span>user@remotehost ~<span class="o">]</span>$ <span class="nb">exit</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="nb">logout</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>Connection to remotehost closed.
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="o">[</span>user@host ~<span class="o">]</span>$ 
</code></pre></div>
<p><strong>Using ssh-agent for Non-interactive Authentication</strong></p>
<p>If your SSH private key is protected with a passphrase, you normally have to enter the passphrase
to use the private key for authentication. However, you can use a program called <strong>ssh-agent</strong> to
temporarily cache the passphrase in memory. Then any time that you use SSH to log in to another
system with the private key, <strong>ssh-agent</strong> will automatically provide the passphrase for you. This
is convenient, and can improve security by providing fewer opportunities for someone "shoulder
surfing" to see you type the passphrase in.</p>
<p>Depending on your local system's configuration, if you initially log in to the GNOME graphical
desktop environment, the <strong>ssh-agent</strong> program might automatically be started and configured for
you.</p>
<p>If you log in on a text console, log in using <strong>ssh</strong>, or use <strong>sudo</strong> or <strong>su</strong>, you will probably need to start
<strong>ssh-agent</strong> manually for that session. You can do this with the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="o">[</span>user@host ~<span class="o">]</span>$ <span class="nb">eval</span> <span class="k">$(</span>ssh-agent<span class="k">)</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>Agent pid <span class="m">10155</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="o">[</span>user@host ~<span class="o">]</span>$ 
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">NOTE</p>
<p>When you run <strong>ssh-agent</strong>, it prints out some shell commands. You need to run
these commands to set environment variables used by programs like <strong>ssh-add</strong> to
communicate with it. The <strong>eval $(ssh-agent)</strong> command starts <strong>ssh-agent</strong> and
runs those commands to automatically set those environment variables for that shell
session. It also displays the PID of the <strong>ssh-agent</strong> process.</p>
</div>
<p>Once <strong>ssh-agent</strong> is running, you need to tell it the passphrase for your private key or keys. You
can do this with the <strong>ssh-add</strong> command.</p>
<p>The following <strong>ssh-add</strong> commands add the private keys from <strong>/home/user/.ssh/id_rsa</strong> (the
default) and <strong>/home/user/.ssh/key-with-pass</strong> files, respectively.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="o">[</span>user@host ~<span class="o">]</span>$ ssh-add
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>Identity added: /home/user/.ssh/id_rsa <span class="o">(</span>user@host.lab.example.com<span class="o">)</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="o">[</span>user@host ~<span class="o">]</span>$ ssh-add .ssh/key-with-pass
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>Enter passphrase <span class="k">for</span> .ssh/key-with-pass: redhatpass
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>Identity added: .ssh/key-with-pass <span class="o">(</span>user@host.lab.example.com<span class="o">)</span>
</code></pre></div>
<p>After successfully adding the private keys to the ssh-agent process, you can invoke an SSH
connection using the <strong>ssh</strong> command. If you are using any private key file other than the default
<strong>/home/user/.ssh/id_rsa</strong> file, then you must use the <strong>-i</strong> option with the <strong>ssh</strong> command to
specify the path to the private key file.</p>
<p>The following example of the <strong>ssh</strong> command uses the default private key file to authenticate to an
SSH server.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="o">[</span>user@host ~<span class="o">]</span>$ ssh user@remotehost
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>Last login: Fri Apr  <span class="m">5</span> <span class="m">10</span>:53:50 <span class="m">2019</span> from host.example.com
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="o">[</span>user@remotehost ~<span class="o">]</span>$ 
</code></pre></div>
<p>The following example of the <strong>ssh</strong> command uses the <strong>/home/user/.ssh/key-with-pass</strong> (non-
default) private key file to authenticate to an SSH server. The private key in the following example
has already been decrypted and added to its parent <strong>ssh-agent</strong> process, so the <strong>ssh</strong> command
does not prompt you to decrypt the private key by interactively entering its passphrase.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="o">[</span>user@host ~<span class="o">]</span>$ ssh -i .ssh/key-with-pass user@remotehost
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>Last login: Mon Apr  <span class="m">8</span> <span class="m">09</span>:44:20 <span class="m">2019</span> from host.example.com
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="o">[</span>user@remotehost ~<span class="o">]</span>$ 
</code></pre></div>
<p>When you log out of the session that started <strong>ssh-agent</strong>, the process will exit and your the
passphrases for your private keys will be cleared from memory.</p>
<h3 id="customizing-openssh-service-configuration">CUSTOMIZING OPENSSH SERVICE CONFIGURATION<a class="headerlink" href="#customizing-openssh-service-configuration" title="Permanent link">&para;</a></h3>
<h4 id="configuring-the-openssh-server">CONFIGURING THE OPENSSH SERVER<a class="headerlink" href="#configuring-the-openssh-server" title="Permanent link">&para;</a></h4>
<p>OpenSSH service is provided by a daemon called sshd. Its main configuration file is <strong>/etc/ssh/
sshd_config</strong>.</p>
<p>The default configuration of the OpenSSH server works well. However, you might want to make
some changes to strengthen the security of your system. There are two common changes you
might want to make. You might want to prohibit direct remote login to the root account, and you
might want to prohibit password-based authentication (in favor of SSH private key authentication).</p>
<h4 id="prohibit-the-superuser-from-logging-in-using-ssh">PROHIBIT THE SUPERUSER FROM LOGGING IN USING SSH<a class="headerlink" href="#prohibit-the-superuser-from-logging-in-using-ssh" title="Permanent link">&para;</a></h4>
<p>It is a good practice to prohibit direct login to the root user account from remote systems. Some
of the risks of allowing direct login as root include:</p>
<ul>
<li>
<p>The user name root exists on every Linux system by default, so a potential attacker only has
to guess the password, instead of a valid user name and password combination. This reduces
complexity for an attacker.</p>
</li>
<li>
<p>The root user has unrestricted privileges, so its compromise can lead to maximum damage to
the system.</p>
</li>
<li>
<p>From an auditing perspective, it can be hard to track which authorized user logged in as root
and made changes. If users have to log in as a regular user and switch to the root account, this
generates a log event that can be used to help provide accountability.</p>
</li>
</ul>
<p>The OpenSSH server uses the <strong>PermitRootLogin</strong> configuration setting in the <strong>/etc/ssh/
sshd_config</strong> configuration file to allow or prohibit users logging in to the system as root.</p>
<p><code>PermitRootLogin yes</code></p>
<p>With the <strong>PermitRootLogin</strong> parameter to <strong>yes</strong>, as it is by default, people are permitted to log in as
root. To prevent this, set the value to <strong>no</strong>. Alternatively, to prevent password-based authentication
but allow private key-based authentication for root, set the <strong>PermitRootLogin</strong> parameter to
<strong>without-password</strong>.</p>
<p>The SSH server (sshd) must be reloaded for any changes to take effect.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="o">[</span>root@host ~<span class="o">]</span><span class="c1"># systemctl reload sshd</span>
</code></pre></div>
<div class="admonition danger">
<p class="admonition-title">IMPORTANT</p>
<p>The advantage of using systemctl reload sshd command is that it tells sshd
to re-read its configuration file rather than completely restarting the service. A
systemctl restart sshd command would also apply the changes, but would
also stop and start the service, breaking all active SSH connections to that host.</p>
</div>
<h4 id="prohibiting-password-based-authentication-for-ssh">PROHIBITING PASSWORD-BASED AUTHENTICATION FOR SSH<a class="headerlink" href="#prohibiting-password-based-authentication-for-ssh" title="Permanent link">&para;</a></h4>
<p>Allowing only private key-based logins to the remote command line has various advantages:</p>
<ul>
<li>
<p>Attackers cannot use password guessing attacks to remotely break into known accounts on the
system.</p>
</li>
<li>
<p>With passphrase-protected private keys, an attacker needs both the passphrase and a copy of
the private key. With passwords, an attacker just needs the password.</p>
</li>
<li>
<p>By using passphrase-protected private keys in conjunction with ssh-agent, the passphrase is
exposed less frequently since it is entered less frequently, and logging in is more convenient for
the user.</p>
</li>
</ul>
<p>The OpenSSH server uses the PasswordAuthentication parameter in the <strong>/etc/ssh/
sshd_config</strong> configuration file to control whether users can use password-based authentication
to log in to the system.</p>
<p><code>PasswordAuthentication yes</code></p>
<p>The default value of <strong>yes</strong> for the PasswordAuthentication parameter in the <strong>/etc/ssh/
sshd_config</strong> configuration file causes the SSH server to allow users to use password-based
authentication while logging in. The value of no for PasswordAuthentication prevents users
from using password-based authentication.</p>
<p>Keep in mind that whenever you change the <strong>/etc/ssh/sshd_config</strong> file, you must reload the
sshd service for changes to take effect.</p>
<div class="admonition danger">
<p class="admonition-title">IMPORTANT</p>
<p>Remember, if you turn off password-based authentication for ssh, you need to have
a way to ensure that the user's ~/.ssh/authorized_keys file on the remote
server is populated with their public key, so that they can log in.</p>
</div>
<h3 id="summary">SUMMARY<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h3>
<p>In this chapter, you learned:</p>
<ul>
<li>
<p>The <strong>ssh</strong> command allows users to access remote systems securely using the SSH protocol.</p>
</li>
<li>
<p>A client system stores remote servers' identities in <strong>~/.ssh/known_hosts</strong> and <strong>/etc/ssh/
ssh_known_hosts</strong>.</p>
</li>
<li>
<p>SSH supports both password-based and key-based authentication.</p>
</li>
<li>
<p>The <strong>ssh-keygen</strong> command generates an SSH key pair for authentication. The <strong>ssh-copy-id</strong>
command exports the public key to remote systems.</p>
</li>
<li>
<p>The sshd service implements the SSH protocol on Red Hat Enterprise Linux systems.</p>
</li>
<li>
<p>It is a recommended practice to configure sshd to disable remote logins as root and to require
public key authentication rather than password-based authentication.</p>
</li>
</ul>
<h3 id="lab">LAB<a class="headerlink" href="#lab" title="Permanent link">&para;</a></h3>
<p>pdf - 359</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 1, 2022</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../service/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Controlling Services And Daemons" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Controlling Services And Daemons
            </div>
          </div>
        </a>
      
      
        
        <a href="../store/" class="md-footer__link md-footer__link--next" aria-label="Next: Analyzing And Storing Logs" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Analyzing And Storing Logs
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 Divijesh Varma. All rights reserved.
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "navigation.top", "navigation.sections", "content.tooltips", "header.autohide"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="../../javascripts/feedback.js"></script>
      
    
    
  </body>
</html>