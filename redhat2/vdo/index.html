
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://divijesh.tech/redhat2/vdo/">
      
      <link rel="icon" href="../../assets/img/layout/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Implementing Advanced Storage Features - Divijesh Varma</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="teal">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#managing-layered-storage-with-stratis" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Divijesh Varma" class="md-header__button md-logo" aria-label="Divijesh Varma" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Divijesh Varma
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Implementing Advanced Storage Features
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../linux/vi/" class="md-tabs__link">
        Linux
      </a>
    </li>
  

  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../redhat/intro/" class="md-tabs__link md-tabs__link--active">
        RedHat
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../english/vol1/" class="md-tabs__link">
        English
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../basics/threat-modeling/" class="md-tabs__link">
        Knowledge Base
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../tools/" class="md-tabs__link">
        Recommendations
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../about/" class="md-tabs__link">
        About
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Divijesh Varma" class="md-nav__button md-logo" aria-label="Divijesh Varma" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Divijesh Varma
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Linux" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Editors
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Editors" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Editors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/vi/" class="md-nav__link">
        Vim
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/nano/" class="md-nav__link">
        Nano
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Notes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Notes" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/rhcsa/" class="md-nav__link">
        Tritree
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/user/" class="md-nav__link">
        User Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/acl/" class="md-nav__link">
        Access control lists (ACLs)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/network/" class="md-nav__link">
        Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/ssh/" class="md-nav__link">
        OpenSSH
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/process/" class="md-nav__link">
        Process Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/software/" class="md-nav__link">
        Software Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/systemd/" class="md-nav__link">
        Systemd Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/cron/" class="md-nav__link">
        Cron Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/logs/" class="md-nav__link">
        Logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/disk/" class="md-nav__link">
        Disk Management
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          RedHat
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="RedHat" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          RedHat
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          RHSA I (RH124)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="RHSA I (RH124)" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          RHSA I (RH124)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/intro/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/access/" class="md-nav__link">
        Accessing The Command Line
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/manage/" class="md-nav__link">
        Managing Files From The Command Line
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/help/" class="md-nav__link">
        Getting Help In Red Hat Enterprise Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/edit/" class="md-nav__link">
        Creating, Viewing, And Editing Text Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/users/" class="md-nav__link">
        Managing Local Users And Groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/control/" class="md-nav__link">
        Controlling Access To Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/monitor/" class="md-nav__link">
        Monitoring And Managing Linux Processes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/service/" class="md-nav__link">
        Controlling Services And Daemons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/secssh/" class="md-nav__link">
        Configuring And Securing Ssh
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/store/" class="md-nav__link">
        Analyzing And Storing Logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/mannet/" class="md-nav__link">
        Managing Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/archiv/" class="md-nav__link">
        Archiving And Transferring Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/pack/" class="md-nav__link">
        Installing And Updating Software Packages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/filsys/" class="md-nav__link">
        Accessing Linux File Systems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/support/" class="md-nav__link">
        Analyzing Servers And Getting Support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redhat/review/" class="md-nav__link">
        Comprehensive Review
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          RHSA II (RH134)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="RHSA II (RH134)" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          RHSA II (RH134)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cmd/" class="md-nav__link">
        Improving Command-Line Productivity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/" class="md-nav__link">
        Scheduling Future Tasks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tuning/" class="md-nav__link">
        Tuning System Performance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../acls/" class="md-nav__link">
        Controlling Access To Files With Acls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../selinux/" class="md-nav__link">
        Managing Selinux Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../storage/" class="md-nav__link">
        Managing Basic Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lvm/" class="md-nav__link">
        Managing Logical Volumes
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Implementing Advanced Storage Features
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Implementing Advanced Storage Features
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#managing-layered-storage-with-stratis" class="md-nav__link">
    MANAGING LAYERED STORAGE WITH STRATIS
  </a>
  
    <nav class="md-nav" aria-label="MANAGING LAYERED STORAGE WITH STRATIS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#describing-the-stratis-architecture" class="md-nav__link">
    DESCRIBING THE STRATIS ARCHITECTURE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compressing-and-deduplicating-storage-with-vdo" class="md-nav__link">
    COMPRESSING AND DEDUPLICATING STORAGE WITH VDO
  </a>
  
    <nav class="md-nav" aria-label="COMPRESSING AND DEDUPLICATING STORAGE WITH VDO">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#describing-virtual-data-optimizer" class="md-nav__link">
    DESCRIBING VIRTUAL DATA OPTIMIZER
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementing-virtual-data-optimizer" class="md-nav__link">
    IMPLEMENTING VIRTUAL DATA OPTIMIZER
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    SUMMARY
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab" class="md-nav__link">
    LAB
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nas/" class="md-nav__link">
        Accessing Network-Attached Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../boot/" class="md-nav__link">
        Controlling The Boot Process
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          English
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="English" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          English
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_1">
          Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorial" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../english/vol1/" class="md-nav__link">
        Vol-1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../english/vol2/" class="md-nav__link">
        Vol-2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../english/vol3/" class="md-nav__link">
        Vol-3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../english/vol4/" class="md-nav__link">
        Vol-4
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Knowledge Base
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Knowledge Base" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Knowledge Base
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_1">
          The Basics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="The Basics" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          The Basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/threat-modeling/" class="md-nav__link">
        Threat Modeling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/dns/" class="md-nav__link">
        Introduction to DNS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/multi-factor-authentication/" class="md-nav__link">
        Multi-factor Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/account-deletion/" class="md-nav__link">
        Account Deletion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2">
          Android
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Android" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Android
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../android/overview/" class="md-nav__link">
        Android Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../android/grapheneos-vs-calyxos/" class="md-nav__link">
        GrapheneOS vs CalyxOS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3">
          Linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Linux" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux-desktop/overview/" class="md-nav__link">
        Linux Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux-desktop/hardening/" class="md-nav__link">
        System Hardening
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux-desktop/sandboxing/" class="md-nav__link">
        Application Sandboxing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4">
          Advanced
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Advanced" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Advanced
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/integrating-metadata-removal/" class="md-nav__link">
        Integrating Metadata Removal
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Recommendations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Recommendations" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Recommendations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/" class="md-nav__link">
        Privacy Tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_2" type="checkbox" id="__nav_6_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_2">
          Browsers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Browsers" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          Browsers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../browsers/" class="md-nav__link">
        Web Browsers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_3" type="checkbox" id="__nav_6_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_3">
          Operating Systems
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Operating Systems" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          Operating Systems
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../android/" class="md-nav__link">
        Android
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux-desktop/" class="md-nav__link">
        Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../qubes/" class="md-nav__link">
        Qubes OS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../router/" class="md-nav__link">
        Router Firmware
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_4" type="checkbox" id="__nav_6_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_4">
          Providers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Providers" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          Providers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/" class="md-nav__link">
        Cloud Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dns/" class="md-nav__link">
        DNS Resolvers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../email/" class="md-nav__link">
        Email Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../search-engines/" class="md-nav__link">
        Search Engines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vpn/" class="md-nav__link">
        VPN Services
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_5" type="checkbox" id="__nav_6_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_5">
          Software
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Software" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_5">
          <span class="md-nav__icon md-icon"></span>
          Software
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../calendar-contacts/" class="md-nav__link">
        Calendar and Contact Sync
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/" class="md-nav__link">
        Notebooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../email-clients/" class="md-nav__link">
        Email Clients
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../encryption/" class="md-nav__link">
        Encryption Software
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../file-sharing/" class="md-nav__link">
        File Sharing and Sync
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata-removal-tools/" class="md-nav__link">
        Metadata Removal Tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../multi-factor-authentication/" class="md-nav__link">
        Multi-Factor Authenticators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../passwords/" class="md-nav__link">
        Password Managers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../productivity/" class="md-nav__link">
        Productivity Tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../real-time-communication/" class="md-nav__link">
        Real-Time Communication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../news-aggregators/" class="md-nav__link">
        News Aggregators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../self-contained-networks/" class="md-nav__link">
        Self-Contained Networks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../video-streaming/" class="md-nav__link">
        Video Streaming
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        Heading
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#managing-layered-storage-with-stratis" class="md-nav__link">
    MANAGING LAYERED STORAGE WITH STRATIS
  </a>
  
    <nav class="md-nav" aria-label="MANAGING LAYERED STORAGE WITH STRATIS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#describing-the-stratis-architecture" class="md-nav__link">
    DESCRIBING THE STRATIS ARCHITECTURE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compressing-and-deduplicating-storage-with-vdo" class="md-nav__link">
    COMPRESSING AND DEDUPLICATING STORAGE WITH VDO
  </a>
  
    <nav class="md-nav" aria-label="COMPRESSING AND DEDUPLICATING STORAGE WITH VDO">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#describing-virtual-data-optimizer" class="md-nav__link">
    DESCRIBING VIRTUAL DATA OPTIMIZER
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementing-virtual-data-optimizer" class="md-nav__link">
    IMPLEMENTING VIRTUAL DATA OPTIMIZER
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    SUMMARY
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab" class="md-nav__link">
    LAB
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  




  <h1>Implementing Advanced Storage Features</h1>

<h3 id="managing-layered-storage-with-stratis">MANAGING LAYERED STORAGE WITH STRATIS<a class="headerlink" href="#managing-layered-storage-with-stratis" title="Permanent link">&para;</a></h3>
<h4 id="describing-the-stratis-architecture">DESCRIBING THE STRATIS ARCHITECTURE<a class="headerlink" href="#describing-the-stratis-architecture" title="Permanent link">&para;</a></h4>
<p>The current local storage solution in Red Hat Enterprise Linux (RHEL) includes many stable
and mature technologies, including the device mapper (dm), the logical volume manager (LVM)
and the XFS file system. Features provided by these components include massively scalable file
systems, snapshots, redundant (RAID) logical devices, multipathing, thin provisioning, caching,
deduplication, and support for virtual machines and containers. Each storage stack layer (dm,
LVM, and XFS) is managed using layer-specific commands and utilities, requiring that system
administrators manage physical devices, fixed-size volumes, and file systems as separate storage
components.</p>
<p>A new generation of storage management solutions appeared in recent years, referred to as
volume-managing file systems, that dynamically and transparently manage the volume layer as
file systems are created and sized. However, although the community development of these file
systems was ongoing for years, none reached the level of feature support and stability required to
become the primary local storage for Red Hat Enterprise Linux.</p>
<p>With RHEL 8, Red Hat introduces the Stratis storage management solution. Instead of developing
from scratch, as other storage projects attempted, Stratis works with existing RHEL storage
components. Stratis runs as a service that manages pools of physical storage devices, and
transparently creates and manages volumes for the file systems being created. Because Stratis
uses existing storage drivers and tools, all of the advanced storage features that you currently use
in LVM, XFS, and the device mapper are also supported by Stratis.</p>
<p>In a volume-managed file system, file systems are built inside shared pools of disk devices using
a concept known as thin provisioning. Stratis file systems do not have fixed sizes and no longer
preallocate unused block space. Although the file system is still built on a hidden LVM volume,
Stratis manages the underlying volume for you and can expand it when needed. The in-use size of
a file system is seen as the amount of actual blocks in use by contained files. The space available
to a file system is the amount of space still unused in the pooled devices on which it resides.
Multiple file systems can reside in the same pool of disk devices, sharing the available space, but
file systems can also reserve pool space to guarantee availability when needed.</p>
<p>Stratis uses stored metadata to recognize managed pools, volumes, and file systems. Therefore,
file systems created by Stratis should never be reformatted or reconfigured manually; they should
only be managed using Stratis tools and commands. Manually configuring Stratis file systems
could cause the loss of that metadata and prevent Stratis from recognizing the file systems it has
created.</p>
<p>You can create multiple pools with different sets of block devices. From each pool, you can create
one or more file systems. Currently, you can create up to 224 file systems per pool. The following
diagram illustrates how the elements of the Stratis storage management solution are positioned.</p>
<p><img alt="Elements of stratis" src="https://www.linuxprobe.com/links/RH134/images/advstorage/storage-modern.svg" /></p>
<p>A pool groups block devices into the data tier and optionally the cache tier. The data tier focuses
on flexibility and integrity and the cache tier focuses on improved performance. Because the
cache tier is intended to improve performance, you should use block devices that have higher
input/output per second (IOPS), such as SSDs.</p>
<p><strong>Describing the Simplified Storage Stack</strong></p>
<p>Stratis simplifies many aspects of local storage provisioning and configuration across a range of
Red Hat products. For example, in earlier versions of the <strong>Anaconda</strong> installer, system administrators
had to layer each aspect of disk management over the other. Now, the installer uses Stratis,
simplifying disk setup. Other products that use Stratis include <strong>Cockpit</strong>, Red Hat Virtualization,
and Red Hat Enterprise Linux Atomic Host. For all of these products, Stratis makes it simpler and
less error prone to manage storage space and snapshots. Stratis allows easier integration with the
higher-level management tools than using any CLI programmatically.</p>
<p><img alt="Stratis" src="https://www.linuxprobe.com/links/RH134/images/advstorage/storage-stratis-in-linux-stack.svg" /></p>
<p><strong>Describing Stratis Layers</strong></p>
<p>Internally, Stratis uses the Backstore subsystem to manage the block devices, and the
Thinpool subsystem to manage the pools. The Backstore subsystem has a data tier that
maintains the on-disk metadata on block devices, and detects and corrects data corruption. The
cache tier uses high-performance block devices to act as a cache on top of the data tier. The
Thinpool subsystem manages the thin-provisioned volumes associated with the Stratis file
systems. This subsystem uses the dm-thin device mapper driver to replace LVM on the virtual
volume sizing and management. dm-thin creates volumes with a large virtual size, formatted with
XFS, but with a small physical size. As the physical size nears full, Stratis enlarges it automatically.</p>
<p><img alt="layers" src="https://www.linuxprobe.com/links/RH134/images/advstorage/storage-modern-layers.svg" /></p>
<p><strong>Managing Thin-provisioned File Systems</strong></p>
<p>To manage the thin-provisioned file systems using the Stratis storage management solution,
install the stratis-cli and stratisd packages. The stratis-cli package provides the <strong>stratis</strong>
command, which translates user requests to the stratisd service via the D-Bus API. The stratisd
package provides the stratisd service, which implements the D-Bus interface, and manages
and monitors the elements of Stratis, such as block devices, pools, and file systems. The D-Bus
API is available if the stratisd service is running.</p>
<p>Install and activate Stratis using the usual tools:</p>
<ul>
<li>Install <em>stratis-cli</em> and <em>stratisd</em> using the <strong>yum install</strong> command.</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>[root@host ~]# yum install stratis-cli stratisd
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>...output omitted...
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>Is this ok [y/N]: y
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>...output omitted...
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>Complete!
</code></pre></div>
- Activate the stratisd service using the <strong>systemctl</strong> command.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>[root@host ~]# systemctl enable --now stratisd
</code></pre></div>
The following are common management operations performed using the Stratis storage
management solution.</p>
<ul>
<li>Create pools of one or more block devices using the <strong>stratis pool create</strong> command.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>[root@host ~]# stratis pool create pool1 /dev/vdb
</code></pre></div>
<p>Each pool is a subdirectory under the <strong>/stratis</strong> directory.</p>
<ul>
<li>Use the <strong>stratis pool list</strong> command to view the list of available pools.</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>[root@host ~]# stratis pool list
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>Name       Total Physical Size       Total Physical Used
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>pool1        5 GiB                       52 MiB
</code></pre></div>
- Use the <strong>stratis pool add-data</strong> command to add additional block devices to a pool.</p>
<p>[root@host ~]# stratis pool add-data pool1 /dev/vdc</p>
<ul>
<li>Use the <strong>stratis blockdev list</strong> command to view the block devices of a pool.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>[root@host ~]# stratis blockdev list pool1
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>Pool Name        Device Node         Physical Size       State      Tier  
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>  pool1             /dev/vdb            5 GiB             In-use     Data
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>  pool1             /dev/vdc            5 GiB             In-use     Data
</code></pre></div>
<ul>
<li>Use the <strong>stratis filesystem create</strong> command to create a dynamic and flexible file
system from a pool.</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>[root@host ~]# stratis filesystem create pool1 filesystem1
</code></pre></div>
The links to the Stratis file systems are in the <strong>/stratis/pool1</strong> directory.</p>
<ul>
<li>Stratis supports file-system snapshotting with the <strong>stratis filesystem snapshot</strong>
command. Snapshots are independent of the source file systems.</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>[root@host ~]# stratis filesystem snapshot pool1 filesystem1 snapshot1
</code></pre></div>
- Use the <strong>stratis filesystem list</strong> command to view the list of available file systems.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>[root@host ~]# stratis filesystem list
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>...output omitted...
</code></pre></div>
To ensure that the Stratis file systems are persistently mounted, edit <strong>/etc/fstab</strong> and specify the
details of the file system. The following command displays the UUID of the file system that you
should use in <strong>/etc/fstab</strong> to identify the file system.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>[root@host ~]# lsblk --output=UUID /stratis/pool1/filesystem1
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>UUID        31b9363b-add8-4b46-a4bf-c199cd478c55
</code></pre></div>
The following is an example entry in the <strong>/etc/fstab</strong> file to persistently mount a Stratis file
system.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>UUID=31b9...8c55    /dir1   xfs     defaults,x-systemd.requires=stratisd.service    0 0
</code></pre></div>
The <strong>x-systemd.requires=stratisd.service</strong> mount option delays mounting the file system
until after systemd starts the stratisd.service during the boot process.</p>
<div class="admonition info">
<p class="admonition-title">NOTE</p>
<p>Failure to use the x-systemd.requires=stratisd.service mount option in /etc/fstab for the Stratis file system will result in the machine booting to emergency.target on the next reboot.</p>
</div>
<h3 id="compressing-and-deduplicating-storage-with-vdo">COMPRESSING AND DEDUPLICATING STORAGE WITH VDO<a class="headerlink" href="#compressing-and-deduplicating-storage-with-vdo" title="Permanent link">&para;</a></h3>
<h4 id="describing-virtual-data-optimizer">DESCRIBING VIRTUAL DATA OPTIMIZER<a class="headerlink" href="#describing-virtual-data-optimizer" title="Permanent link">&para;</a></h4>
<p>Red Hat Enterprise Linux 8 includes the Virtual Data Optimizer (VDO) driver, which optimizes
the data footprint on block devices. VDO is a Linux device mapper driver that reduces disk
space usage on block devices, and minimizes the replication of data, saving disk space and even
increasing data throughput. VDO includes two kernel modules: the kvdo module to transparently
control data compression, and the uds module for deduplication.</p>
<p>The VDO layer is placed on top of an existing block storage device, such as a RAID device or a local
disk. Those block devices can also be encrypted devices. The storage layers, such as LVM logical
volumes and file systems, are placed on top of a VDO device. The following diagram shows the
placement of VDO in an infrastructure consisting of KVM virtual machines that are using optimized
storage devices.</p>
<p><img alt="VDO based virtual machine" src="https://www.linuxprobe.com/links/RH134/images/advstorage/storage-enhance-virtualdisks.svg" /></p>
<p>VDO applies three phases to data in the following order to reduce the footprint on storage
devices:</p>
<ol>
<li>
<p>Zero-Block Elimination filters out data blocks that contain only zeroes (0) and records the
information of those blocks only in the metadata. The nonzero data blocks are then passed
to the next phase of processing. This phase enables the thin provisioning feature in the VDO
devices.</p>
</li>
<li>
<p>Deduplication eliminates redundant data blocks. When you create multiple copies of the
same data, VDO detects the duplicate data blocks and updates the metadata to use those
duplicate blocks as references to the original data block without creating redundant data
blocks. The universal deduplication service (UDS) kernel module checks redundancy of the
data through the metadata it maintains. This kernel module ships as part of the VDO.</p>
</li>
<li>
<p>Compression is the last phase. The kvdo kernel module compresses the data blocks using
LZ4 compression and groups them on 4 KB blocks.</p>
</li>
</ol>
<h4 id="implementing-virtual-data-optimizer">IMPLEMENTING VIRTUAL DATA OPTIMIZER<a class="headerlink" href="#implementing-virtual-data-optimizer" title="Permanent link">&para;</a></h4>
<p>The logical devices that you create using VDO are called VDO volumes. VDO volumes are similar
to disk partitions; you can format the volumes with the desired file-system type and mount it like a
regular file system. You can also use a VDO volume as an LVM physical volume.</p>
<p>To create a VDO volume, specify a block device and the name of the logical device that VDO
presents to the user. You can optionally specify the logical size of the VDO volume. The logical size
of the VDO volume can be more than the physical size of the actual block device.</p>
<p>Because the VDO volumes are thinly provisioned, users can only see the logical space in use and
are unaware of the actual physical space available. If you do not specify the logical size while
creating the volume, VDO assumes the actual physical size as the logical size of the volume. This
1:1 ratio of mapping logical size to physical size gives better performance but provides less efficient
use of storage space. Based on your infrastructure requirements, you should prioritize either
performance or space efficiency.</p>
<p>When the logical size of a VDO volume is more than the actual physical size, you should proactively
monitor the volume statistics to view the actual usage using the <strong>vdostats --verbose</strong> command.</p>
<p><strong>Enabling VDO</strong></p>
<p>Install the vdo and kmod-kvdo packages to enable VDO in the system.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>[root@host ~]# yum install vdo kmod-kvdo
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>...output omitted...
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>Is this ok [y/N]: y
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>...output omitted...
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>Complete!
</code></pre></div>
<strong>Creating a VDO Volume</strong></p>
<p>To create a VDO volume, run the <strong>vdo create</strong> command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>[root@host ~]# vdo create --name=vdo1 --device=/dev/vdd --vdoLogicalSize=50G
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>...output omitted...
</code></pre></div>
<p>If you omit the logical size, the resulting VDO volume gets the same size as its physical device.</p>
<p>When the VDO volume is in place, you can format it with the file-system type of your choice and
mount it under the file-system hierarchy on your system.</p>
<p><strong>Analyzing a VDO Volume</strong></p>
<p>To analyze a VDO volume, run the vdo status command. This command displays a report on the
VDO system, and the status of the VDO volume in YAML format. It also displays attributes of the
VDO volume. Use the <strong>--name=</strong> option to specify the name of a particular volume. If you omit the
name of the specific volume, the output of the <strong>vdo status</strong> command displays the status of all
the VDO volumes.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>[root@host ~]# vdo status --name=vdo1
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>...output omitted...
</code></pre></div>
The <strong>vdo list</strong> command displays the list of VDO volumes that are currently started. You can start
and stop a VDO volume using the <strong>vdo start</strong> and <strong>vdo stop</strong> commands, respectively.</p>
<h3 id="summary">SUMMARY<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h3>
<p>In this chapter, you learned:</p>
<ul>
<li>
<p>The Stratis storage management solution implements flexible file systems that grow dynamically
with data.</p>
</li>
<li>
<p>The Stratis storage management solution supports thin provisioning, snapshotting, and
monitoring.</p>
</li>
<li>
<p>The Virtual Data Optimizer (VDO) aims to reduce the cost of data storage.</p>
</li>
<li>
<p>The Virtual Data Optimizer applies zero-block elimination, data deduplication, and data
compression to optimize disk space efficiency.</p>
</li>
</ul>
<h3 id="lab">LAB<a class="headerlink" href="#lab" title="Permanent link">&para;</a></h3>
<p>pdf - 247</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 7, 2022</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../lvm/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Managing Logical Volumes" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Managing Logical Volumes
            </div>
          </div>
        </a>
      
      
        
        <a href="../nas/" class="md-footer__link md-footer__link--next" aria-label="Next: Accessing Network-Attached Storage" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Accessing Network-Attached Storage
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 Divijesh Varma. All rights reserved.
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "navigation.top", "navigation.sections", "content.tooltips", "header.autohide"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="../../javascripts/feedback.js"></script>
      
    
    
  </body>
</html>